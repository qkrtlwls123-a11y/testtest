<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2030 Vision Puzzle</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Noto+Sans+KR:wght@400;500;700;900&display=swap');

        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
            background: #e0e0e0;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        /* ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ */
        @media print {
            body { background: white; }
            .no-print { display: none !important; }
            .page-break { page-break-after: always; }
            .container { box-shadow: none !important; margin: 0 !important; border: none !important; }
        }

        .container {
            width: 210mm;
            min-height: 297mm;
            background: white;
            margin: 20px auto;
            padding: 10mm;
            overflow: hidden;
            box-sizing: border-box;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            position: relative;
        }

        /* --- 1. ë¬¸ì œì§€ (The Sheet) --- */
        #scatter-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            height: 100%;
            padding: 20px 0;
        }

        /* ì¼ë ¨ë²ˆí˜¸ ì„¸íŠ¸ (í•œ ì¤„) */
        .serial-set {
            display: flex;
            gap: 10px; /* ì¹¸ ì‚¬ì´ ê°„ê²© */
            padding: 10px;
            transform-origin: center;
            /* ë°°ê²½ ì œê±° */
        }

        /* ê°œë³„ ë„¤ëª¨ì¹¸ */
        .serial-box {
            width: 50px;  /* ì‚¬ì´ì¦ˆ í™•ëŒ€ */
            height: 60px; /* ì‚¬ì´ì¦ˆ í™•ëŒ€ */
            border: 2px solid #333; /* í…Œë‘ë¦¬ */
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Black Ops One', sans-serif; /* ê°€ë…ì„± ì¢‹ì€ ìˆ«ì/ì˜ë¬¸ í°íŠ¸ */
            font-size: 32px; /* ê¸€ì í¬ê¸° í™•ëŒ€ */
            font-weight: 500; /* Medium ~ SemiBold */
            position: relative;
            background: transparent; /* ë°°ê²½ìƒ‰ ì œê±° */
            overflow: hidden;
        }

        /* ë…¸ì´ì¦ˆ í…ìŠ¤íŠ¸ (ë°©í•´ë¬¼) */
        .noise {
            position: absolute;
            font-size: 14px;
            font-weight: 300;
            z-index: 0;
            opacity: 0.9;
            user-select: none;
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-content: center;
            line-height: 10px;
        }
        
        .target-char {
            z-index: 1;
            position: relative;
        }

        /* --- 2. ì¹´ë“œ ë””ìì¸ --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10mm;
            margin-top: 10mm;
        }

        .card {
            border: 1px solid #000;
            height: 200px;
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-sizing: border-box;
            position: relative;
            background: white;
        }

        /* íƒ€ì´í‹€ ì¹´ë“œ ì „ìš© ìŠ¤íƒ€ì¼ */
        .title-card-header {
            background-color: #000;
            color: #fff;
            padding: 5px 10px;
            font-size: 12px;
            font-weight: 700;
            text-align: center;
            margin: -15px -15px 10px -15px; /* ì¹´ë“œ ìƒë‹¨ì— ë¶™ì´ê¸° */
        }
        
        .title-main {
            font-size: 18px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 10px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .qr-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0px;
            margin-top: auto;
        }
        
        .qr-img {
            width: 100px;
            height: 100px;
            border: 1px solid #ddd;
        }



        /* ë‚´ìš© ì¹´ë“œ ì „ìš© ìŠ¤íƒ€ì¼ */
        .content-text {
            font-size: 20px;
            font-weight: 700;
            text-align: center;
            margin: auto 0;
            word-break: keep-all;
            line-height: 1.5;
        }

    </style>
</head>
<body>

    <div class="no-print" style="text-align: center; padding: 15px; background: #333; color: white; position: sticky; top: 0; z-index: 999;">
        <span style="margin-right: 20px;">ğŸ² ìƒˆë¡œê³ ì¹¨(F5)í•˜ë©´ ì •ë‹µ ìœ„ì¹˜ì™€ ì¼ë ¨ë²ˆí˜¸ê°€ ëœë¤ìœ¼ë¡œ ë°”ë€ë‹ˆë‹¤.</span>
        <button onclick="window.print()" style="padding: 8px 20px; font-size: 16px; cursor: pointer; font-weight: bold;">ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°</button>
    </div>

    <div class="container">
        <div style="text-align: center; margin-bottom: 20px;">
            <h1 style="font-family: 'Black Ops One'; font-size: 48px; margin: 0;">DATA RECOVERY</h1>
            <p style="margin: 5px 0; font-size: 12px; color: #555;">SECURITY LEVEL: TOP SECRET / [2030 PROJECT]</p>
        </div>
        
        <div id="scatter-area">
            </div>
    </div>

    <div class="page-break"></div>

    <div class="container">
        <div class="card-grid" id="title-cards-area">
            </div>
    </div>

    <div class="page-break"></div>

    <div class="container">
        <div class="card-grid" id="content-cards-area">
            </div>
    </div>

    <script>
        /*
            [ê²Œì„ ë¡œì§ ì„¤ê³„]
            1. ì´ 6ê°œì˜ ì»¬ëŸ¼(ë„¤ëª¨ì¹¸ ìœ„ì¹˜ 1~6).
            2. ê° ì»¬ëŸ¼ë§ˆë‹¤ 'ì •ë‹µ'ì´ ìˆ¨ê²¨ì§„ í–‰(Row)ì´ ë‹¨ í•˜ë‚˜ ì¡´ì¬í•¨.
               ì˜ˆ: 1ë²ˆì§¸ ìˆ«ìëŠ” 3ë²ˆ ì¤„ì—, 2ë²ˆì§¸ ìˆ«ìëŠ” 8ë²ˆ ì¤„ì—... (ë¶„ì‚° ë°°ì¹˜)
            3. ì •ë‹µ ì¹¸ ì¡°ê±´:
               - ë°©í•´ë¬¼(Noise) ìƒ‰ìƒ = ì¹´ë“œ í…Œë‘ë¦¬(ì¡°ëª…) ìƒ‰ìƒ
               - ê¸€ì(Char) ìƒ‰ìƒ = ë‚´ìš© ì¹´ë“œ íŒíŠ¸ ìƒ‰ìƒ
               -> í•´ë‹¹ ì¡°ëª…ì„ ë¹„ì¶”ë©´ ë°©í•´ë¬¼ì€ ì‚¬ë¼ì§€ê³  ê¸€ìë§Œ ë³´ì„.
            4. ì˜¤ë‹µ ì¹¸ ì¡°ê±´:
               - ì ˆëŒ€ 'ë‚´ìš© ì¹´ë“œ íŒíŠ¸ ìƒ‰ìƒ'ì˜ ê¸€ìë¥¼ í¬í•¨í•˜ì§€ ì•ŠìŒ (í˜¼ë™ ë°©ì§€).
        */

        const config = {
            rowCount: 9, // ìƒì„±í•  ì¼ë ¨ë²ˆí˜¸ ì¤„ ìˆ˜
            colCount: 6   // í•œ ì¤„ë‹¹ ì¹¸ ìˆ˜
        };

        // ìƒ‰ìƒ ì •ì˜ (ì¶œë ¥ìš©)
        const C = {
            red: '#FF0000', green: '#00FF00', blue: '#0000FF',
            cyan: '#00FFFF', magenta: '#FF00FF', yellow: '#FFD700', // Yellow ê°€ë…ì„± ìœ„í•´ ì•½ê°„ ì–´ë‘¡ê²Œ
            black: '#000000', purple: '#800080'
        };

        // ë¬¸ì œ ë°ì´í„° (ìˆœì„œëŒ€ë¡œ Box 1~6)
        // light: ë°©í•´ë¬¼ ìƒ‰ (ì¡°ëª…ìƒ‰), targetColor: ì •ë‹µ ê¸€ì ìƒ‰
        const solutions = [
            { id: 1, char: 'P', light: 'red',     lightHex: C.red,     targetColor: 'blue',    targetHex: C.blue },
            { id: 2, char: 'W', light: 'green',   lightHex: C.green,   targetColor: 'magenta', targetHex: C.magenta },
            { id: 3, char: '5', light: 'blue',    lightHex: C.blue,    targetColor: 'yellow',  targetHex: C.yellow },
            { id: 4, char: '2', light: 'cyan',    lightHex: C.cyan,    targetColor: 'red',     targetHex: C.red },
            { id: 5, char: '1', light: 'magenta', lightHex: C.magenta, targetColor: 'green',   targetHex: C.green },
            { id: 6, char: '6', light: 'yellow',  lightHex: C.yellow,  targetColor: 'purple',  targetHex: C.purple }
        ];

        // ì¹´ë“œ í…ìŠ¤íŠ¸ ì •ë³´
        const cardInfo = [
            { id: 1, title: "#1 ê³ ê°ì‹ ë¢°+ PLUS", desc: "ê³ ê°ì‹ ë¢° + PLUS <span style='color:blue'>í™•ëŒ€</span>" },
            { id: 2, title: "#2 AI PIONEER", desc: "ë””ì§€í„¸ AI ì´ë‹ˆì…”í‹°ë¸Œ <span style='color:magenta'>ì„ ë„</span>" },
            { id: 3, title: "#3 Global Frontier", desc: "ê¸€ë¡œë²Œ ê¸ˆìœµê·¸ë£¹ <span style='color:#b59a00'>ë„ì•½</span>" }, // Yellow í…ìŠ¤íŠ¸ ì˜ ë³´ì´ê²Œ ì¡°ì •
            { id: 4, title: "#4 Core Value-up", desc: "ì´ˆì¼ë¥˜ ë³´í—˜ ê²½ìŸë ¥ <span style='color:red'>í™•ë³´</span>" },
            { id: 5, title: "#5 Investment Excellence", desc: "ìì‚°ìš´ìš© ì•ˆì •ì„±Â·ìˆ˜ìµì„± <span style='color:green'>ì œê³ </span>" },
            { id: 6, title: "#6 Growth-Profit Balance", desc: "ì„±ì¥ê³¼ ì´ìµì˜ ì„ ìˆœí™˜ ê¸°ë°˜ <span style='color:purple'>ë§ˆë ¨</span>" }
        ];

        // QR ë§í¬ (ë‹¨ìƒ‰ ì´ë¯¸ì§€)
        const qrLinks = {
            'red': 'https://dummyimage.com/600x600/ff0000/ff0000.png',
            'green': 'https://dummyimage.com/600x600/00ff00/00ff00.png',
            'blue': 'https://dummyimage.com/600x600/0000ff/0000ff.png',
            'cyan': 'https://dummyimage.com/600x600/00ffff/00ffff.png',
            'magenta': 'https://dummyimage.com/600x600/ff00ff/ff00ff.png',
            'yellow': 'https://dummyimage.com/600x600/ffff00/ffff00.png'
        };
        const qrApi = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=";

        // ëœë¤ ë¬¸ìì…‹
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        const noiseColors = [C.red, C.green, C.blue, C.cyan, C.magenta, C.yellow];
        const textColors = [C.blue, C.magenta, C.yellow, C.red, C.green, C.purple, C.black];

        function init() {
            createProblemSheet();
            createCards();
        }

        function createProblemSheet() {
            const container = document.getElementById('scatter-area');
            
            // 1. ì •ë‹µì´ ë“¤ì–´ê°ˆ 'í–‰(Row) ë²ˆí˜¸'ë¥¼ ê° ì»¬ëŸ¼ë³„ë¡œ ëœë¤ ì§€ì •
            // ex) targetRows[0] = 3 -> 1ë²ˆì¹¸ì˜ ì •ë‹µì€ 3ë²ˆì§¸ ì¤„ì— ìˆìŒ.
            let targetRows = [];
            let availableRows = Array.from({length: config.rowCount}, (_, i) => i);
            
            // ì…”í”Œ í›„ ì•ì—ì„œ 6ê°œ ë½‘ê¸° (ì •ë‹µì´ ê²¹ì¹˜ì§€ ì•Šê²Œ ë¶„ì‚°)
            availableRows.sort(() => Math.random() - 0.5);
            for(let i=0; i<6; i++) {
                targetRows[i] = availableRows[i];
            }

            // 2. ì¤„(Row) ìƒì„±
            for (let r = 0; r < config.rowCount; r++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'serial-set';
                
                // ì•½ê°„ì˜ íšŒì „/ì´ë™ìœ¼ë¡œ ëœë¤ì„± ë¶€ì—¬
                const rot = (Math.random() * 4) - 2; // -2 ~ 2ë„
                const tx = (Math.random() * 20) - 10;
                rowDiv.style.transform = `rotate(${rot}deg) translateX(${tx}px)`;

                // 3. ì¹¸(Box) ìƒì„±
                for (let c = 0; c < config.colCount; c++) {
                    const box = document.createElement('div');
                    box.className = 'serial-box';

                    // ì´ ì¹¸ì´ ì •ë‹µ ì¹¸ì¸ê°€?
                    const isTarget = (targetRows[c] === r);
                    const solutionData = solutions[c]; // í˜„ì¬ ì»¬ëŸ¼(Box ë²ˆí˜¸)ì— í•´ë‹¹í•˜ëŠ” ì •ë‹µ ë°ì´í„°

                    if (isTarget) {
                        // [ì •ë‹µ ì¹¸ ìƒì„± ë¡œì§]
                        // 1. ë©”ì¸ ê¸€ì: ì •ë‹µ ë¬¸ì / ìƒ‰ìƒ: íƒ€ê²Ÿ ìƒ‰ìƒ
                        const charSpan = document.createElement('span');
                        charSpan.innerText = solutionData.char;
                        charSpan.style.color = solutionData.targetHex;
                        charSpan.className = 'target-char';
                        
                        // 2. ë…¸ì´ì¦ˆ: ì¡°ëª… ìƒ‰ìƒ (ë¹› ë¹„ì¶”ë©´ ì‚¬ë¼ì§)
                        const noiseDiv = createNoise(solutionData.lightHex);
                        
                        box.appendChild(noiseDiv);
                        box.appendChild(charSpan);
                        // ë””ë²„ê·¸ìš© (ì •ë‹µ í‘œì‹œëŠ” ì‹¤ì œ ì¸ì‡„ì‹œ ì œê±°ë¨)
                        // box.style.borderColor = "red"; 

                    } else {
                        // [ì˜¤ë‹µ(Decoy) ì¹¸ ìƒì„± ë¡œì§]
                        // ì¤‘ìš”: ì˜¤ë‹µ ì¹¸ì—ëŠ” ì ˆëŒ€ 'ì •ë‹µ ìƒ‰ìƒ'ì„ ì“°ë©´ ì•ˆë¨ (í˜¼ë€ ë°©ì§€)
                        
                        // ëœë¤ ê¸€ì
                        const rndChar = chars.charAt(Math.floor(Math.random() * chars.length));
                        
                        // ëœë¤ ê¸€ì ìƒ‰ìƒ (ë‹¨, í˜„ì¬ ì»¬ëŸ¼ì˜ ì •ë‹µ ìƒ‰ìƒì€ ì œì™¸)
                        let safeTextColors = textColors.filter(color => color !== solutionData.targetHex);
                        const rndTextColor = safeTextColors[Math.floor(Math.random() * safeTextColors.length)];

                        // ëœë¤ ë…¸ì´ì¦ˆ ìƒ‰ìƒ (ì•„ë¬´ê±°ë‚˜ ìƒê´€ì—†ìŒ, ë‹¤ì–‘í•˜ê²Œ)
                        const rndNoiseColor = noiseColors[Math.floor(Math.random() * noiseColors.length)];

                        const charSpan = document.createElement('span');
                        charSpan.innerText = rndChar;
                        charSpan.style.color = rndTextColor;
                        charSpan.className = 'target-char';

                        const noiseDiv = createNoise(rndNoiseColor);

                        box.appendChild(noiseDiv);
                        box.appendChild(charSpan);
                    }
                    rowDiv.appendChild(box);
                }
                container.appendChild(rowDiv);
            }
        }

        function createNoise(color) {
            const div = document.createElement('div');
            div.className = 'noise';
            div.style.color = color;
            
            // ì‘ì€ ê¸€ìë“¤ë¡œ ë…¸ì´ì¦ˆ ìƒì„±
            let noiseText = "";
            const junk = "!@#$%^&*()_+~QWERTYUIOP{}|";
            for(let i=0; i<15; i++) {
                const char = junk.charAt(Math.floor(Math.random() * junk.length));
                const span = document.createElement('span');
                span.innerText = char;
                span.style.transform = `rotate(${Math.random()*360}deg)`;
                span.style.margin = '1px';
                div.appendChild(span);
            }
            return div;
        }

        function createCards() {
            const tContainer = document.getElementById('title-cards-area');
            const cContainer = document.getElementById('content-cards-area');

            // íƒ€ì´í‹€ ì¹´ë“œ ìƒì„±
            cardInfo.forEach((info, idx) => {
                const sol = solutions[idx];
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="title-card-header">2030 í•µì‹¬ê³¼ì œ</div>
                    <div class="title-main">${info.title}</div>
                    <div class="qr-section">
                        <img class="qr-img" src="${qrApi}${encodeURIComponent(qrLinks[sol.light])}" />
                        <div>
                        </div>
                    </div>
                `;
                tContainer.appendChild(card);
            });

            // ë‚´ìš© ì¹´ë“œ ìƒì„± (ëœë¤ ì…”í”Œ)
            let shuffledInfo = [...cardInfo].sort(() => Math.random() - 0.5);
            shuffledInfo.forEach(info => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="content-text">${info.desc}</div>
                `;
                cContainer.appendChild(card);
            });
        }

        window.onload = init;
    </script>
</body>
</html>
